<?php$db = new SQL(0);$sql = 'SELECT SQL_CALC_FOUND_ROWS T1.*,T2.right as is_expert FROM user_list as T1 LEFT JOIN user_rights as T2 ON T1.id=T2.user AND `right` = "expert"';$sql .= ' WHERE 1 GROUP BY T1.id';switch ((isset($_GET["sort"])?$_GET["sort"]:"karma")) {	case "name": $sql .= ' ORDER BY username ASC'; break;	case "karma": $sql .= ' ORDER BY Karma DESC'; break;}$sql .= ' LIMIT '.(isset($_GET["page"])?($_GET["page"]*60):"0").',60';$rows = $db->cmdrows(0, $sql);$AnzahlUsers = $db->countallrows();PageEngine::html("html_head", array("title" => _h("{n} Users of {1}", array("n" =>$AnzahlUsers, 1 => SiteConfig::val("page/title","Q/A Forum")))));PageEngine::html("header", array("searchquery" => (isset($_GET["query"])?$_GET["query"]:"")));?>	<div id="Content" class="content-wrapper PageUsers">		<article class="ContentLeft">			<div class="tabBar"> <div id="sort_tabs" class="tabsA"> <span class="label"><?=_e("Sort by Â»");?></span>				<a id="by_karma" href="<?=URL::addVar("sort","karma");?>" class="sortby" title="sort by Karma"><span>Karma</span></a>				<a id="by_name" href="<?=URL::addVar("sort","name");?>" class="sortby" title="sort by Username"><span>Name</span></a>			</div></div>						<h1 class="search-result-summary"><?=_e("{n} Users", array("n" => $AnzahlUsers)); ?></h1>			<div class="clearfix"></div>						<section class="tag-list tags"><?php	foreach ($rows as $row) {		echo('<div class="user" style="float:left; position: relative; width:180px; height:32px; overflow: hidden; margin-bottom: 5px;">');		echo('<a href="'.UserProfile::ProfilePermaLink($row["id"], $row["username"]).'"><img class="gravatar" width="32" height="32" src="http://www.gravatar.com/avatar/'.md5(strtolower(trim($row["email_standard"]))).'?s=32&d=mm" title="'.html($row["username"]).'" alt="'._e("{0}'s Gravatar Image").'">');		if ($row["is_expert"] == "expert") echo('<img src="'.get_path("/skins/default/images/icons/expert.png").'" TITLE="'._e("Expert for this Subject").'" style="width:8px; height:8px; position: absolute; top:24px; left: 28px;"/>');		echo('<span class="username">'.html($row["username"]).'</span></a>');		if ($row["country"] != "" AND $row["show_country"] == "1") echo('<img class="flag" src="'.get_path("/skins/default/images/flags/16x11/".strtolower($row["country"]).".png").'" alt="'._e(Country::getCountryName($row["country"])).'" title="'._e(Country::getCountryName($row["country"])).'"/>');		echo('<br/>');		echo('<span class="karma counter" title="'._e("User karma of {0}",array($row["username"])).'">'.$row["karma"].'</span>');		if ($row["award_gold"] > 0) echo('<span class="award1" title="'._e("gold medals of {0}",array($row["username"])).'">'.$row["award_gold"].'</span>');		if ($row["award_silver"] > 0) echo('<span class="award2" title="'._e("silver medals of {0}",array($row["username"])).'">'.$row["award_silver"].'</span>');		if ($row["award_bronce"] > 0) echo('<span class="award3" title="'._e("bronce medals of {0}",array($row["username"])).'">'.$row["award_bronce"].'</span>');		echo('</div>');	}PageEngine::html("box_paginator", array("page" => (isset($_GET["page"])?$_GET["page"]+1:1), "max" => ceil($db->countallrows()/60)));?>			</section>								</article>		<aside class="ContentRight"><?phpPageEngine::html("widget_contributors");PageEngine::html("widget_tags");?>				</aside>			</div>	<style>.flag { margin-left: 2px; opacity: 0.9;  }.flag:hover { opacity: 1; box-shadow: 2px 2px 2px #aaa; }</style>		<?phpPageEngine::html("footer");?>	</body></html><?phpexit(1);?>