<?phpfunction format_blocknumber($value = 0) {	if ($value+0 == 0) return "null";	if ($value >= 1000000) return floor($value/1000000)."Mio";	if ($value >= 10000) return floor($value/1000)."k";	return $value;}if (isset($_GET["query"])) $subtitle = _h("Search: '{0}'", array($_GET["query"]));elseif (isset($_GET["tag"])) $subtitle = $_GET["tag"];else $subtitle = "Fragen";PageEngine::html("html_head", array("subtitle" => $subtitle, "rss" => array(array("title" => _h("Fragen"),"link" => get_path("/questions.rss")),array("title" => _h("Neueste Antworten"),"link" => get_path("/lastanswers.rss")))));PageEngine::html("header", array("searchquery" => (isset($_GET["query"])?$_GET["query"]:"")));if (!isset($_GET["sort"])) $_GET["sort"] = "activity";$db = new SQL(0);$sql = 'SELECT SQL_CALC_FOUND_ROWS T1.*, T3.username as actionusername, T3.country, T3.show_country 	FROM questions as T1 	LEFT JOIN user_list as T2 ON T1.author=T2.id	LEFT JOIN user_list as T3 ON T1.user_action=T3.id';if (isset($_GET["tag"])) $sql .= ' LEFT JOIN question_tags as T4 ON T1.id=T4.question';$sql .= ' WHERE 1 ';if (isset($_GET["scope"]) AND ($_GET["scope"] == "unanswered")) $sql .= ' AND (is_answered = "0")';if (isset($_GET["tag"])) $sql .= ' AND (T4.tag = "'.SQL::convtxt($_GET["tag"]).'")';if (isset($_GET["query"]) AND $_GET["query"] != "") $sql .= ' AND (match(`title`,`question`,`tags`) AGAINST ("'.SQL::convtxt($_GET["query"]).'") OR title LIKE "%'.SQL::convtxt($_GET["query"]).'%")';$sql .= ' GROUP BY T1.id ';switch (isset($_GET["sort"])?$_GET["sort"]:"activity") {	case "age":		$sql .= 'ORDER BY date_edited DESC'; break;	case "activity":		$sql .= 'ORDER BY date_action DESC'; break;	case "answers":		$sql .= 'ORDER BY count_answers DESC'; break;	case "votes":		$sql .= 'ORDER BY count_votes DESC'; break;	default: case "activity":		$sql .= 'ORDER BY date_edited DESC' ; 		$_GET["dir"] = "";		break;}$sql .= ' LIMIT '.(isset($_GET["page"])?$_GET["page"]*30:0).',30';$rows = $db->cmdrows(0, $sql);$AnzahlFragen = $db->countallrows();?>	<div id="Content" class="content-wrapper PageQuestions">		<article class="ContentLeft">			<a class="rss" href="<?=get_path("/questions/rss");?>" title="<?=_e("Subscribe to the Questions-RSS-Feed");?>"><?=_e("RSS");?></a>			<div class="tabBar"> <div id="sort_tabs" class="tabsA"> <span class="label"><?=_e("Sort by »");?></span>				<a id="by_age" href="<?=URL::addVar("sort","age");?>" class="sortby <?=($_GET["sort"] == "age"?"active":"");?>" title="Klicken, um die neuesten Fragen zu sehen"><span><?=_e("Date");?></span></a>				<a id="by_activity" href="<?=URL::addVar("sort","activity");?>" class="sortby <?=($_GET["sort"] == "activity"?"active":"");?>" title="Klicken, um die ältesten bearbeiteten Fragen zu sehen"><span><?=_e("Aktivity");?></span></a><!--  ▼ -->				<a id="by_answers" href="<?=URL::addVar("sort","answers");?>" class="sortby <?=($_GET["sort"] == "answers"?"active":"");?>" title="Klicken, um die meist beantworteten Fragen zu sehen"><span><?=_e("Answers");?></span></a>				<a id="by_votes" href="<?=URL::addVar("sort","votes");?>" class="sortby <?=($_GET["sort"] == "votes"?"active":"");?>" title="Klicken, um die höchstbewerteten Fragen anzuzeigen"><span><?=_e("Votes");?></span></a> </div> </div>						<h1 class="search-result-summary"><?=_e("{n} Questions", array("n" => $AnzahlFragen)); ?></h1>			<div class="clearfix"></div>						<section class="question-list"><?phpforeach ($rows as $row) {?>	<div class="short-summary" id="question-<?=$row["id"]; ?>"> 					<div class="counts"> 						<div class="countbox views <?=($row["count_views"] > 0?"some-views":"no-views");?>"> <span class="item-count"><?=format_blocknumber($row["count_views"]);?></span> <div><?=_e("views");?></div> </div> 						<div class="countbox answers <?=($row["count_answers"] > 0?"some-answers":"no-answers");?> <?=($row["is_answered"] == "1"?"answered":"");?>"> <span class="item-count"><?=format_blocknumber($row["count_answers"]);?></span> <div><?=_e("answers");?></div> </div> 						<div class="countbox votes  <?=($row["count_votes"] > 0?"some-votes":"no-votes");?>"> <span class="item-count"><?=format_blocknumber($row["count_votes"]);?></span> <div><?=_e("votes");?></div> 					</div> 				<div class="clearfix"></div> 				<div class="userinfo"> <abbr class="timeago" title="<?=date(_h("j. M Y H:i:s T"), $row["date_action"]);?>"><?=Question::format_date($row["date_action"]);?></abbr> 				<?php				if ($row["user_action"] > 0) {				?>				<a href="<?=UserProfile::ProfilePermaLink($row["user_action"], $row["actionusername"]);?>"><?=html($row["actionusername"]);?><?php								if ($row["country"] != "" AND $row["show_country"] == "1") echo('<img class="flag" src="'.get_path("/skins/default/images/flags/16x11/".strtolower($row["country"]).".png").'" alt="'._e(Country::getCountryName($row["country"])).'" title="'._e(Country::getCountryName($row["country"])).'"/>');				echo('</a>');				}				?> </div> </div> 				<h2><a title="<?=htmlentities($row["question"],3,"UTF-8"); ?>" href="<?=Question::PermalinkByData($row["id"],$row["title"]); ?>"><?=htmlentities($row["title"],3,"UTF-8"); ?></a>				<?php				if ($row["is_closed"] == "1") echo('<img class="post closed" src="'.get_path("/skins/default/images/layout/post_locked.png").'" title="'._e("This question is closed").'"/>');				if ($row["is_bounty"] == "1") echo('<img class="post bounty" src="'.get_path("/skins/default/images/icons/bounty.png").'" title="'._e("This question has a bounty").'"/>');				?></h2> 				<?php				if ($row["tags"]."" != "") {				?>				<ul class="tags tagline">				<?php					$g = explode(",", $row["tags"]);					foreach ($g as $a) {						echo('<li class="tag-left"><a class="tag tag-right '.((isset($_GET["tag"]) && ($_GET["tag"] == $a))?"active":"").' '.Tag::niceClass($a).'" href="'.get_path("/questions?tag=".urlencode($a)).'" title="'._e("show questions with the tag '{0}'",array($a)).'" rel="tag">'.htmlentities($a,3,"UTF-8").'</a></li>');					}				?>				</ul> <?php } ?>	</div>				<?php } ?><p style="margin-top: 20px; padding-top:15px; font-size: 13px; color: #707070; clear: both;"><?=_e("Nothing found?");?> <a style="color:#1B79BD;" href="<?=get_path("/questions/ask"); ?>"><?=_e("Please tell us your question");?></a></p><?php	PageEngine::html("box_paginator", array("page" => (isset($_GET["page"])?$_GET["page"]+1:1), "max" => ceil($AnzahlFragen/30)));?>			</section>								</article>		<aside class="ContentRight"><?phpPageEngine::html("widget_contributors", array(), "widget_contributors", 3600);PageEngine::html("widget_tags", array(), "widget_tags", 86400);?>				</aside>			</div>				<?phpPageEngine::html("footer");?>	</body></html><?phpexit(1);?>