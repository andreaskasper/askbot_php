<?phpclass UserProfile {	private static $_cache = array();	private static function _load($id) {		if (isset(self::$_cache[$id])) return;		$db = new SQL(0);		self::$_cache[$id+0] = $db->cmdrow(0, 'SELECT * FROM user_list WHERE id={0} LIMIT 0,1', array($id+0));	}	public static function ProfilePermaLink($id, $name = null, $subsite = null) {		if ($name == null) { self::_load($id); $name = self::$_cache["username"]; }		$name2 = str_replace(array(" ","#"), array("_",""), $name);		if ($subsite != null) return get_path("/users/".$id."/".html($name2)."/".$subsite);		return get_path("/users/".$id."/".urlencode($name2));	}}