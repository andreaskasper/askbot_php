<?php$db = new SQL(0);$sql = 'SELECT SQL_CALC_FOUND_ROWS * FROM user_badges as T1 LEFT JOIN user_list as T2 ON T1.user=T2.id';$sql .= ' WHERE badge = {0} ';switch ((isset($_GET["sort"])?$_GET["sort"]:"karma")) {	case "name": $sql .= ' ORDER BY username ASC'; break;	case "karma": $sql .= ' ORDER BY Karma DESC'; break;}$sql .= ' LIMIT '.(isset($_GET["page"])?($_GET["page"]*60):"0").',60';$rows = $db->cmdrows(0, $sql, array($params["badge_id"]+0));$AnzahlUsers = $db->countallrows();PageEngine::html("html_head", array("title" => _h("{n} Benutzer haben dieses Abzeichen", array("n" => $AnzahlUsers))));PageEngine::html("header");?>	<div id="Content" class="content-wrapper PageUsers">		<article class="ContentLeft">			<h1>Abzeichen "<?=html(Badges::$badgelist[$params["badge_id"]+0]["title"]);?>"</h1>						<p><span class="awardmedal"><span class="award<?=Badges::$badgelist[$params["badge_id"]+0]["medal"];?>"><?=html(Badges::$badgelist[$params["badge_id"]+0]["title"]);?></span></span><?=html(Badges::$badgelist[$params["badge_id"]+0]["desc"]);?></p>					<div class="tabBar"> <div id="sort_tabs" class="tabsA"> <span class="label">Sortiere nach Â»</span>				<a id="by_karma" href="<?=URL::addVar("sort","karma");?>" class="sortby" title="nach Karma sortieren"><span>Karma</span></a>				<a id="by_name" href="<?=URL::addVar("sort","name");?>" class="sortby" title="nach Benutzernamen sortieren"><span>Name</span></a>			</div></div>						<h2 class="search-result-summary"><?=_e("{0} Benutzer haben dieses Abzeichen", array(0 => $AnzahlUsers)); ?></h2>			<div class="clearfix"></div>						<section class="tag-list tags"><?php	foreach ($rows as $row) {		echo('<div class="user" style="float:left; width:180px; height:32px; overflow: hidden; margin-bottom: 5px;">');		echo('<a href="'.get_path("/users/".$row["id"]."/".urlencode(strtolower($row["username"]))).'"><img class="gravatar" width="32" height="32" src="http://www.gravatar.com/avatar/'.md5(strtolower(trim($row["email_standard"]))).'?s=32&d=mm" title="'.html($row["username"]).'" alt="'.html($row["username"]).'\'s Gravatar-Bild">');		echo('<span class="username">'.html($row["username"]).'</span></a><br/>');		echo('<span class="karma counter">'.$row["karma"].'</span>');		if ($row["award_gold"] > 0) echo('<span class="award1">'.$row["award_gold"].'</span>');		if ($row["award_silver"] > 0) echo('<span class="award2">'.$row["award_silver"].'</span>');		if ($row["award_bronce"] > 0) echo('<span class="award3">'.$row["award_bronce"].'</span>');		echo('</div>');	}PageEngine::html("box_paginator", array("page" => (isset($_GET["page"])?$_GET["page"]+1:1), "max" => ceil($db->countallrows()/60)));?>			</section>								</article>		<aside class="ContentRight"><?phpPageEngine::html("widget_contributors");PageEngine::html("widget_tags");?>				</aside>			</div>	<style>.awardmedal { font-size: 17px; line-height: 250%; margin-right: 5px; color: #333; text-decoration: none; background: url(<?=get_path("/skins/default/images/layout/medala.gif");?>) no-repeat; border-left: 1px solid #EEE; border-top: 1px solid #EEE; border-bottom: 1px solid #CCC; border-right: 1px solid #CCC; padding: 4px 12px 4px 6px; }.award3 { background: url(<?=get_path("/skins/default/images/layout/award_bronce_12.png");?>) no-repeat left center; padding-left: 15px; }.award2 { background: url(<?=get_path("/skins/default/images/layout/award_silver_12.png");?>) no-repeat left center; padding-left: 15px; }.award1 { background: url(<?=get_path("/skins/default/images/layout/award_gold_12.png");?>) no-repeat left center; padding-left: 15px; }</style>		<?phpPageEngine::html("footer");?>	</body></html><?phpexit(1);?>